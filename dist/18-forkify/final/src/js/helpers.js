import{async}from"regenerator-runtime";import{TIMEOUT_SEC}from"./config.js";const timeout=function(e){return new Promise(function(t,o){setTimeout(function(){o(new Error(`Request took too long! Timeout after ${e} second`))},1e3*e)})},AJAX=async function(t,o=void 0){try{var e=o?fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}):fetch(t),r=await Promise.race([e,timeout(TIMEOUT_SEC)]),n=await r.json();if(r.ok)return n;throw new Error(`${n.message} (${r.status})`)}catch(t){throw t}};export{AJAX};